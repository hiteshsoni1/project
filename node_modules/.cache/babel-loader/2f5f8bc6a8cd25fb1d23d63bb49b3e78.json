{"ast":null,"code":"var _jsxFileName = \"/home/soni/project/src/body.js\";\nimport React, { useState, useEffect } from 'react';\nimport { GridListTile, GridListTileBar, makeStyles } from '@material-ui/core';\nimport ImageModal from './ImageModal';\nimport _ from 'lodash';\nimport './body.css';\n\nclass Body extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClick = (url, title) => {\n      // setOpen(true);\n      // setModal({url:url,title:title})\n      this.setState({\n        open: true,\n        modal: {\n          url: url,\n          title: title\n        }\n      });\n    };\n\n    this.handleScroll = () => {\n      let element = document.getElementById('photos');\n      console.log(window.scrollY, window.innerHeight, element.clientHeight, element.offsetTop);\n\n      if (window.scrollY + window.innerHeight > element.clientHeight + element.offsetTop) {\n        this.setState({\n          page: this.page + 1\n        });\n        console.log('scroll', data);\n      }\n    };\n\n    this.state = {\n      open: false,\n      data: [],\n      modal: {},\n      page: 1\n    };\n  }\n\n  componentDidMount() {\n    debouneGetData = _.debounce(getData, 2000);\n    window.addEventListener(\"scroll\", handleScroll, false);\n  }\n\n  componentDidUpdate() {\n    debouneGetData(props.query, setData, data, page);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"photos\",\n      id: \"photos\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, data.map(val => {\n      let url = `https://farm${val.farm}.staticflickr.com/${val.server}/${val.id}_${val.secret}.jpg`;\n      return React.createElement(\"img\", {\n        src: url,\n        className: \"list_image\",\n        key: val.id,\n        onClick: () => handleClick(url, val.title),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      });\n    }), React.createElement(ImageModal, {\n      image: modal,\n      open: open,\n      setOpen: setOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }));\n  }\n\n} // const handleClick = (setOpen,url,title,setModal) => {\n//     setOpen(true);\n//     setModal({url:url,title:title})\n// }\n// const getData = (search,setData,data,page) => {\n//   const url = `https://www.flickr.com/services/rest/?method=flickr.photos.search&per_page=25&api_key=506e716ab594396861cd8e374cf41d89&text=${search}&page=${page}&format=json&nojsoncallback=1`;\n//   fetch(url)\n//   .then((response) => response.json())\n//   .then(value => {\n//     if('photos' in value) {\n//     setData([...data,...value.photos.photo])\n//       console.log(url,page);\n//   }\n//   })\n//   console.log(search);\n// }\n// var debouneGetData;\n// const useStyles = makeStyles({\n//     root: {\n//         position: 'fixed',\n//         alignSelf:'center',\n//         top: '20%',\n//         left: '30%',\n//     },\n//   });\n// function Body(props) {\n//     const [open,setOpen] = useState(false);\n//     const [modal,setModal] = useState({});\n//     const [data,setData] = useState([]);\n//     const [page,setPage] = useState(1);\n//     const classes = useStyles(props);\n//     useEffect(() => {\n//       debouneGetData = _.debounce(getData,2000);\n//       window.addEventListener(\"scroll\", handleScroll, false)\n//       console.log('listner',page)\n//       return (()=> {console.log('we unmount')});\n//         window.removeEventListener(\"scroll\",handleScroll);\n//     },[]);\n//     useEffect(() => {\n//       debouneGetData(props.query,setData,data,page);\n//       console.log('changes')\n//     },[props.query,page])\n//     const handleScroll = () => {\n//       let element = document.getElementById('photos');\n//       console.log(window.scrollY, window.innerHeight, element.clientHeight, element.offsetTop)\n//       if (window.scrollY + window.innerHeight > element.clientHeight + element.offsetTop) {\n//         setPage( page => page + 1 );\n//         console.log('scroll',data);\n//       }\n//     }\n// return (\n//     <div className=\"photos\" id='photos'  >      \n//       {data.map(val => {\n//           let url = `https://farm${val.farm}.staticflickr.com/${val.server}/${val.id}_${val.secret}.jpg`;\n//           return(\n//           <img src={url} className=\"list_image\" key={val.id} onClick={() => handleClick(setOpen,url,val.title,setModal)}/>\n//       )})}\n//     <ImageModal image={modal} open={open} setOpen={setOpen}/>\n// </div>\n// );\n// }\n\n\nexport default Body;","map":{"version":3,"sources":["/home/soni/project/src/body.js"],"names":["React","useState","useEffect","GridListTile","GridListTileBar","makeStyles","ImageModal","_","Body","Component","constructor","props","handleClick","url","title","setState","open","modal","handleScroll","element","document","getElementById","console","log","window","scrollY","innerHeight","clientHeight","offsetTop","page","data","state","componentDidMount","debouneGetData","debounce","getData","addEventListener","componentDidUpdate","query","setData","render","map","val","farm","server","id","secret","setOpen"],"mappings":"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","sourcesContent":["import React,{useState, useEffect} from 'react';\nimport {GridListTile,GridListTileBar,makeStyles} from '@material-ui/core'\nimport ImageModal from './ImageModal'\nimport _ from 'lodash';\nimport './body.css';\n\n\n\nclass Body extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state ={\n      open: false,\n      data: [],\n      modal: {},\n      page: 1\n    }\n  }\n\n  handleClick = (url,title) => {\n    // setOpen(true);\n    // setModal({url:url,title:title})\n    this.setState({\n      open:true,\n      modal : {\n        url:url,\n        title:title\n      }\n    })\n  }\n\n  handleScroll = () => {\n      let element = document.getElementById('photos');\n      console.log(window.scrollY, window.innerHeight, element.clientHeight, element.offsetTop)\n      if (window.scrollY + window.innerHeight > element.clientHeight + element.offsetTop) {\n        this.setState( {page : this.page + 1 });\n        console.log('scroll',data);\n      }\n    }\n\n  componentDidMount() {\n    debouneGetData = _.debounce(getData,2000);\n    window.addEventListener(\"scroll\", handleScroll, false)\n\n  }\n\n  componentDidUpdate() {\n    debouneGetData(props.query,setData,data,page);\n  }\n\n  render() {\n    return (\n      <div className=\"photos\" id='photos'  >      \n        {data.map(val => {\n            let url = `https://farm${val.farm}.staticflickr.com/${val.server}/${val.id}_${val.secret}.jpg`;\n            return(\n            <img src={url} className=\"list_image\" key={val.id} onClick={() => handleClick(url,val.title)}/>\n        )})}\n      <ImageModal image={modal} open={open} setOpen={setOpen}/>\n  </div>\n  );\n  }\n}\n\n// const handleClick = (setOpen,url,title,setModal) => {\n//     setOpen(true);\n//     setModal({url:url,title:title})\n// }\n\n\n// const getData = (search,setData,data,page) => {\n//   const url = `https://www.flickr.com/services/rest/?method=flickr.photos.search&per_page=25&api_key=506e716ab594396861cd8e374cf41d89&text=${search}&page=${page}&format=json&nojsoncallback=1`;\n//   fetch(url)\n//   .then((response) => response.json())\n//   .then(value => {\n//     if('photos' in value) {\n//     setData([...data,...value.photos.photo])\n//       console.log(url,page);\n//   }\n//   })\n//   console.log(search);\n// }\n\n// var debouneGetData;\n\n// const useStyles = makeStyles({\n//     root: {\n//         position: 'fixed',\n//         alignSelf:'center',\n//         top: '20%',\n//         left: '30%',\n//     },\n//   });\n\n// function Body(props) {\n//     const [open,setOpen] = useState(false);\n//     const [modal,setModal] = useState({});\n//     const [data,setData] = useState([]);\n//     const [page,setPage] = useState(1);\n\n//     const classes = useStyles(props);\n\n//     useEffect(() => {\n//       debouneGetData = _.debounce(getData,2000);\n//       window.addEventListener(\"scroll\", handleScroll, false)\n//       console.log('listner',page)\n//       return (()=> {console.log('we unmount')});\n//         window.removeEventListener(\"scroll\",handleScroll);\n//     },[]);\n\n//     useEffect(() => {\n//       debouneGetData(props.query,setData,data,page);\n//       console.log('changes')\n//     },[props.query,page])\n\n      \n//     const handleScroll = () => {\n//       let element = document.getElementById('photos');\n//       console.log(window.scrollY, window.innerHeight, element.clientHeight, element.offsetTop)\n//       if (window.scrollY + window.innerHeight > element.clientHeight + element.offsetTop) {\n//         setPage( page => page + 1 );\n//         console.log('scroll',data);\n//       }\n//     }\n\n\n  // return (\n  //     <div className=\"photos\" id='photos'  >      \n  //       {data.map(val => {\n  //           let url = `https://farm${val.farm}.staticflickr.com/${val.server}/${val.id}_${val.secret}.jpg`;\n  //           return(\n  //           <img src={url} className=\"list_image\" key={val.id} onClick={() => handleClick(setOpen,url,val.title,setModal)}/>\n  //       )})}\n  //     <ImageModal image={modal} open={open} setOpen={setOpen}/>\n  // </div>\n  // );\n// }\n\nexport default Body;\n"]},"metadata":{},"sourceType":"module"}