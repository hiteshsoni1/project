{"ast":null,"code":"var _jsxFileName = \"/home/soni/project/src/Components/SearhList/body.js\";\nimport React, { useState, useEffect } from 'react';\nimport ImageModal from '../../ImageModal';\nimport _ from 'lodash';\nimport './body.css';\nimport { getData } from '../../service';\nvar debouneGetData, throatleGetData;\n\nfunction Body(props) {\n  const [open, setOpen] = useState(false);\n  const [image, SetImage] = useState({});\n  const [data, setData] = useState([]);\n  const [page, setPage] = useState(1);\n  useEffect(() => {\n    debouneGetData = _.debounce(handleData, 2000);\n    throatleGetData = _.throttle(handleData, 2000);\n    window.addEventListener(\"scroll\", handleScroll, false);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, []);\n  useEffect(() => {\n    debouneGetData('search', props.query, page);\n  }, [props.query]);\n  useEffect(() => {\n    throatleGetData('scroll', props.query, page);\n  }, [page]);\n\n  const handleScroll = () => {\n    let element = document.getElementById('photos');\n\n    if (window.scrollY + window.innerHeight >= element.clientHeight + element.offsetTop) {\n      setPage(page => page + 1);\n    }\n  };\n\n  const handleClick = (url, title) => {\n    setOpen(true);\n    SetImage({\n      url: url,\n      title: title\n    });\n  };\n\n  const handleData = async (mode, ...args) => {\n    let dataSet = await getData(...args);\n\n    if (mode == 'scroll') {\n      setData(data => [...data, ...dataSet]);\n    } else {\n      window.scrollTo(0, 0);\n      setData(dataSet);\n      setPage(1);\n    }\n  };\n\n  return React.createElement(\"div\", {\n    className: \"photos\",\n    id: \"photos\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, data.map(val => {\n    let url = `https://farm${val.farm}.staticflickr.com/${val.server}/${val.id}_${val.secret}.jpg`;\n    return React.createElement(\"img\", {\n      src: url,\n      className: \"list_image\",\n      key: val.id,\n      onClick: () => handleClick(url, val.title),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    });\n  }), React.createElement(ImageModal, {\n    image: image,\n    open: open,\n    setOpen: setOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }));\n}\n\nexport default Body;","map":{"version":3,"sources":["/home/soni/project/src/Components/SearhList/body.js"],"names":["React","useState","useEffect","ImageModal","_","getData","debouneGetData","throatleGetData","Body","props","open","setOpen","image","SetImage","data","setData","page","setPage","debounce","handleData","throttle","window","addEventListener","handleScroll","removeEventListener","query","element","document","getElementById","scrollY","innerHeight","clientHeight","offsetTop","handleClick","url","title","mode","args","dataSet","scrollTo","map","val","farm","server","id","secret"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ImageModal from '../../ImageModal'\nimport _ from 'lodash';\nimport './body.css';\nimport { getData } from '../../service'\n\nvar debouneGetData, throatleGetData;\n\nfunction Body(props) {\n    const [open, setOpen] = useState(false);\n    const [image, SetImage] = useState({});\n    const [data, setData] = useState([]);\n    const [page, setPage] = useState(1);\n\n\n    useEffect(() => {\n        debouneGetData = _.debounce(handleData, 2000);\n        throatleGetData = _.throttle(handleData, 2000);\n        window.addEventListener(\"scroll\", handleScroll, false)\n        return (() => window.removeEventListener(\"scroll\", handleScroll));\n    }, []);\n\n    useEffect(() => {\n        debouneGetData('search', props.query, page);\n    }, [props.query])\n\n    useEffect(() => {\n        throatleGetData('scroll', props.query, page);\n    }, [page])\n\n    const handleScroll = () => {\n        let element = document.getElementById('photos');\n        if (window.scrollY + window.innerHeight >= element.clientHeight + element.offsetTop) {\n            setPage(page => page + 1);\n        }\n    }\n\n    const handleClick = (url, title) => {\n        setOpen(true);\n        SetImage({ url: url, title: title })\n    }\n\n    const handleData = async (mode, ...args) => {\n        let dataSet = await getData(...args);\n        if (mode == 'scroll') {\n            setData(data => [...data, ...dataSet]);\n        } else {\n            window.scrollTo(0, 0)\n            setData(dataSet);\n            setPage(1);\n        }\n    }\n\n    return (\n        <div className=\"photos\" id='photos'  >\n            {data.map(val => {\n                let url = `https://farm${val.farm}.staticflickr.com/${val.server}/${val.id}_${val.secret}.jpg`;\n                return (\n                    <img src={url} className=\"list_image\" key={val.id} onClick={() => handleClick(url, val.title)} />\n                )\n            })}\n            <ImageModal image={image} open={open} setOpen={setOpen} />\n        </div>\n    );\n}\n\nexport default Body;\n"]},"metadata":{},"sourceType":"module"}