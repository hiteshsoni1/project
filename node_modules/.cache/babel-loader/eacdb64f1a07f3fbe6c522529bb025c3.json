{"ast":null,"code":"var _jsxFileName = \"/home/soni/project/src/body.js\";\nimport React, { useState, useEffect } from 'react';\nimport { GridList, GridListTile, ListSubheader, GridListTileBar, Modal, SimpleModal, makeStyles, Paper } from '@material-ui/core';\nimport './body.css';\n\nconst handleClick = (setOpen, url, title, setModal) => {\n  setOpen(true);\n  setModal({\n    url: url,\n    title: title\n  });\n};\n\nconst getData = (search, setData, data, page) => {\n  const url = `https://www.flickr.com/services/rest/?method=flickr.photos.search&per_page=25&api_key=506e716ab594396861cd8e374cf41d89&text=${search}&page=${page}&format=json&nojsoncallback=1`;\n  fetch(url).then(response => response.json()).then(value => {\n    if ('photos' in value) {\n      setData([...data, ...value.photos.photo]);\n      console.log(url, page);\n    }\n  });\n  console.log(search);\n};\n\nconst debouncing = (func, delay) => {\n  let interval;\n  return (...args) => {\n    const context = this;\n    clearTimeout(interval);\n    interval = setTimeout(() => {\n      func(...args);\n    }, delay);\n  };\n};\n\nvar f;\nvar d = 1; // const handleScroll = (e,page,setPage) => {\n//   let element = document.getElementById('photos');\n//   console.log(window.scrollY, window.innerHeight, element.clientHeight, element.offsetTop)\n//   if (window.scrollY + window.innerHeight > element.clientHeight + element.offsetTop) {\n//     setPage( page+1 );\n//     console.log('scroll',page);\n//   }\n// }\n\nconst useStyles = makeStyles({\n  root: {\n    position: 'fixed',\n    alignSelf: 'center',\n    top: '20%',\n    // bottom: '50%',\n    left: '30%' // right: '50%',\n    // margin: 'auto'\n\n  }\n});\n\nfunction Body(props) {\n  const [open, setOpen] = useState(false);\n  const [modal, setModal] = useState({});\n  const [data, setData] = useState([]);\n  const [page, setPage] = useState(1);\n\n  const handleScroll = () => {\n    let element = document.getElementById('photos');\n    console.log(window.scrollY, window.innerHeight, element.clientHeight, element.offsetTop);\n\n    if (window.scrollY + window.innerHeight > element.clientHeight + element.offsetTop) {\n      setPage(page + 1);\n      ++d;\n      console.log('scroll', page);\n    }\n  };\n\n  useEffect(() => {\n    f = debouncing(getData, 2000);\n    window.addEventListener(\"scroll\", handleScroll, false);\n    console.log('listner');\n  }, []);\n  useEffect(() => {\n    f(props.query, setData, data, page);\n    console.log('changes');\n  }, [props.query, page]);\n  const classes = useStyles(props);\n  return React.createElement(\"div\", {\n    className: \"photos\",\n    id: \"photos\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, data.map(val => {\n    let url = `https://farm${val.farm}.staticflickr.com/${val.server}/${val.id}_${val.secret}.jpg`;\n    return React.createElement(\"img\", {\n      src: url,\n      className: \"list_image\",\n      key: val.id,\n      onClick: () => handleClick(setOpen, url, val.title, setModal),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    });\n  }), React.createElement(Modal, {\n    \"aria-labelledby\": \"simple-modal-title\",\n    \"aria-describedby\": \"simple-modal-description\",\n    open: open,\n    onClose: () => setOpen(false),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(GridListTile, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: modal.url,\n    style: {\n      maxHeight: '500px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }), React.createElement(GridListTileBar, {\n    title: modal.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  })))));\n}\n\nexport default Body;","map":{"version":3,"sources":["/home/soni/project/src/body.js"],"names":["React","useState","useEffect","GridList","GridListTile","ListSubheader","GridListTileBar","Modal","SimpleModal","makeStyles","Paper","handleClick","setOpen","url","title","setModal","getData","search","setData","data","page","fetch","then","response","json","value","photos","photo","console","log","debouncing","func","delay","interval","args","context","clearTimeout","setTimeout","f","d","useStyles","root","position","alignSelf","top","left","Body","props","open","modal","setPage","handleScroll","element","document","getElementById","window","scrollY","innerHeight","clientHeight","offsetTop","addEventListener","query","classes","map","val","farm","server","id","secret","maxHeight"],"mappings":"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","sourcesContent":["import React,{useState, useEffect} from 'react';\nimport {GridList,GridListTile,ListSubheader,GridListTileBar,Modal,SimpleModal,makeStyles,Paper} from '@material-ui/core'\nimport './body.css';\n\n\nconst handleClick = (setOpen,url,title,setModal) => {\n    setOpen(true);\n    setModal({url:url,title:title})\n}\n\n\nconst getData = (search,setData,data,page) => {\n  const url = `https://www.flickr.com/services/rest/?method=flickr.photos.search&per_page=25&api_key=506e716ab594396861cd8e374cf41d89&text=${search}&page=${page}&format=json&nojsoncallback=1`;\n  fetch(url)\n  .then((response) => response.json())\n  .then(value => {\n    if('photos' in value) {\n    setData([...data,...value.photos.photo])\n      console.log(url,page);\n  }\n  })\n  console.log(search);\n}\n\nconst debouncing = (func,delay) => {\n  let interval;\n  return ((...args) => {\n    const context = this;\n    clearTimeout(interval);\n    interval = setTimeout(() => {\n      func(...args);\n    }, delay);\n  })\n}\n\nvar f;\nvar d = 1;\n// const handleScroll = (e,page,setPage) => {\n//   let element = document.getElementById('photos');\n//   console.log(window.scrollY, window.innerHeight, element.clientHeight, element.offsetTop)\n//   if (window.scrollY + window.innerHeight > element.clientHeight + element.offsetTop) {\n//     setPage( page+1 );\n//     console.log('scroll',page);\n//   }\n// }\n\nconst useStyles = makeStyles({\n    root: {\n        position: 'fixed',\n        alignSelf:'center',\n        top: '20%',\n        // bottom: '50%',\n        left: '30%',\n        // right: '50%',\n        // margin: 'auto'\n    },\n  });\n\nfunction Body(props) {\n    const [open,setOpen] = useState(false);\n    const [modal,setModal] = useState({});\n    const [data,setData] = useState([]);\n    const [page,setPage] = useState(1);\n\n    const handleScroll = () => {\n      let element = document.getElementById('photos');\n  console.log(window.scrollY, window.innerHeight, element.clientHeight, element.offsetTop)\n  if (window.scrollY + window.innerHeight > element.clientHeight + element.offsetTop) {\n    setPage( page + 1 );\n    ++d\n    console.log('scroll',page);\n  }\n    }\n\n    useEffect(() => {\n      f = debouncing(getData,2000);\n      window.addEventListener(\"scroll\", handleScroll, false)\n      console.log('listner')\n    },[]);\n\n    useEffect(() => {\n      f(props.query,setData,data,page);\n      console.log('changes')\n    },[props.query,page])\n\n      \n      const classes = useStyles(props);\n  return (\n      <div className=\"photos\" id='photos'  >      \n        {data.map(val => {\n            let url = `https://farm${val.farm}.staticflickr.com/${val.server}/${val.id}_${val.secret}.jpg`;\n            return(\n            <img src={url} className=\"list_image\" key={val.id} onClick={() => handleClick(setOpen,url,val.title,setModal)}/>\n        )})}\n      <Modal\n        aria-labelledby=\"simple-modal-title\"\n        aria-describedby=\"simple-modal-description\"\n        open={open}\n        onClose={() => setOpen(false)}\n      >\n          <div className=\"modal\">\n        <GridListTile >\n            <img src={modal.url} style={{maxHeight:'500px'}}/>\n            <GridListTileBar\n              title={modal.title}\n            />\n        </GridListTile>\n        </div>\n      </Modal>\n  </div>\n  );\n}\n\nexport default Body;\n"]},"metadata":{},"sourceType":"module"}